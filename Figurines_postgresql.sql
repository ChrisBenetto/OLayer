BEGIN

DROP TABLE IF EXISTS "category",
"user","picture","figurine","comment"

CREATE TABLE IF NOT EXISTS "user" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" TEXT NOT NULL UNIQUE,
  "email" TEXT NOT NULL UNIQUE,
  "created_at" TIMESTAMPTZ NOT NULL DEFAULT now(),
  "updated_at" TIMESTAMPTZ

)
CREATE TABLE IF NOT EXISTS "category" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "content" TEXT NOT NULL UNIQUE,
  "created_at" TIMESTAMPTZ NOT NULL DEFAULT now(),
  "updated_at" TIMESTAMPTZ
)
CREATE TABLE IF NOT EXISTS "figurine" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY
  "name" TEXT NOT NULL ,
  "description" TEXT NOT NULL ,
  "nb_upvote" INT NOT NULL DEFAULT 0,
  "nb_downvote" INT NOT NULL DEFAULT 0,
  "user_id" INT NOT NULL REFERENCES "user"("id")
  "category_id" INT NOT NULL REFERENCES "category"("id")
  "created_at" TIMESTAMPTZ NOT NULL DEFAULT now(),
  "updated_at" TIMESTAMPTZ

)
CREATE TABLE IF NOT EXISTS "comment" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY
  "user_id" INT NOT NULL REFERENCES "user"("id")
  "figurine_id" INT NOT NULL REFERENCES "figurine"("id")

)

CREATE TABLE IF NOT EXISTS "picture" (
  "id" INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY
  "content" TEXT NOT NULL UNIQUE
  "figurine_id" INT NOT NULL REFERENCES "figurine"("id")

COMMIT